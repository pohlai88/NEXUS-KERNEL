<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEXUS // COCKPIT</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;600&family=Playfair+Display:ital,wght@1,400&family=Space+Mono:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">

    <style>
        :root {
            --void: #080808;
            --ink: #ffffff;
            --mid: #333333;
            --dim: rgba(255, 255, 255, 0.1);
            --alert: #ffffff; /* In B&W, Alert is pure white against dim background */
            --border: 1px solid var(--dim);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; outline: none; }

        body {
            background-color: var(--void);
            color: var(--ink);
            font-family: 'Inter', sans-serif;
            height: 100vh;
            width: 100vw;
            overflow: hidden;
            display: flex;
        }

        /* --- TYPOGRAPHY --- */
        .f-mono { font-family: 'Space Mono', monospace; letter-spacing: 0.1em; font-size: 10px; text-transform: uppercase; }
        .f-serif { font-family: 'Playfair Display', serif; font-style: italic; }

        /* --- SIDEBAR (The Spine) --- */
        .sidebar {
            width: 60px;
            height: 100%;
            border-right: var(--border);
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 2rem 0;
            z-index: 20;
            background: var(--void);
        }
        .icon {
            width: 20px; height: 20px; border: 1px solid var(--dim); margin-bottom: 2rem;
            transition: all 0.3s; cursor: pointer; position: relative;
        }
        .icon:hover { border-color: var(--ink); background: var(--dim); }
        .icon.active { background: var(--ink); }

        /* --- MAIN LAYOUT --- */
        .cockpit {
            flex: 1;
            display: grid;
            grid-template-rows: 60px 1fr;
            position: relative;
        }

        /* --- TOP HUD --- */
        .top-bar {
            border-bottom: var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 2rem;
        }
        .status-pulse {
            width: 8px; height: 8px; background: var(--ink); border-radius: 50%;
            box-shadow: 0 0 10px var(--ink); animation: pulse 2s infinite;
        }

        /* --- THE SPLIT VIEW --- */
        .workspace {
            display: grid;
            grid-template-columns: 4fr 5fr; /* Ledger vs Graph */
            height: 100%;
            position: relative;
        }

        /* LEFT: THE LEDGER (Accounting) */
        .panel-ledger {
            border-right: var(--border);
            padding: 2rem;
            position: relative;
        }

        .trx-table { width: 100%; border-collapse: collapse; font-family: 'Space Mono', monospace; font-size: 11px; }
        .trx-table th { text-align: left; color: #666; padding-bottom: 1rem; font-weight: 400; }
        .trx-table td { padding: 1rem 0; border-bottom: 1px solid rgba(255,255,255,0.05); cursor: crosshair; transition: color 0.2s; }
        .trx-table tr:hover td { color: var(--ink); }

        /* The Suspicious Row */
        .row-alert { position: relative; }
        .row-alert td { color: var(--ink); text-shadow: 0 0 5px rgba(255,255,255,0.5); }
        .row-alert::before {
            content: '!';
            position: absolute; left: -15px; top: 12px;
            color: var(--ink); font-weight: bold; font-size: 10px;
        }

        /* RIGHT: THE MORPHOLOGY (Forensic Graph) */
        .panel-morph {
            position: relative;
            overflow: hidden;
            background: radial-gradient(circle at center, #111 0%, #080808 70%);
        }

        /* --- THE NODES (Visualizing Chaos) --- */
        .node {
            position: absolute;
            width: 40px; height: 40px;
            border: 1px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-size: 9px;
            background: var(--void);
            z-index: 10;
            transition: all 0.5s ease;
        }
        .node.main { width: 60px; height: 60px; border-color: var(--ink); box-shadow: 0 0 20px rgba(255,255,255,0.1); }

        /* SVG CONNECTOR LAYER */
        .connector-layer {
            position: absolute; inset: 0; pointer-events: none; z-index: 1;
        }

        /* --- THE PSYCHOLOGY CARD (Floating Insight) --- */
        .insight-card {
            position: absolute;
            bottom: 2rem; right: 2rem;
            width: 300px;
            background: rgba(0,0,0,0.8);
            border: 1px solid var(--ink);
            backdrop-filter: blur(10px);
            padding: 1.5rem;
            transform: translateY(20px);
            opacity: 0;
            transition: all 0.5s cubic-bezier(0.19, 1, 0.22, 1);
            z-index: 50;
        }
        .insight-card.visible { transform: translateY(0); opacity: 1; }

        /* --- THE MAGIC THREAD (Connecting Table to Graph) --- */
        .magic-thread {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none;
            z-index: 100;
        }

        /* ANIMATIONS */
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.3; } 100% { opacity: 1; } }
        @keyframes drift { 0% { transform: translate(0,0); } 50% { transform: translate(10px, -10px); } 100% { transform: translate(0,0); } }

        .floating { animation: drift 10s ease-in-out infinite; }

    </style>
</head>
<body>

    <aside class="sidebar">
        <div style="font-weight: 900; margin-bottom: 3rem; font-size: 1.2rem;">N.</div>
        <div class="icon active"></div> <div class="icon"></div> <div class="icon"></div> <div style="margin-top: auto; writing-mode: vertical-rl;" class="f-mono text-xs opacity-50">V2.0.4</div>
    </aside>

    <div class="cockpit">

        <header class="top-bar">
            <div class="f-mono">
                CASE_ID: #8829_ALPHA <span style="opacity:0.3; margin: 0 1rem;">//</span> FORENSIC_MODE: <span style="color:white;">ACTIVE</span>
            </div>
            <div style="display: flex; gap: 1rem; align-items: center;">
                <div class="f-mono">SYSTEM_INTEGRITY</div>
                <div class="status-pulse"></div>
            </div>
        </header>

        <div class="workspace">

            <section class="panel-ledger">
                <div style="margin-bottom: 2rem; display: flex; justify-content: space-between;">
                    <h2 class="f-serif" style="font-size: 1.5rem;">The Ledger.</h2>
                    <span class="f-mono opacity-50">FILTER: ALL</span>
                </div>

                <table class="trx-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>TIMESTAMP</th>
                            <th>ENTITY</th>
                            <th>AMOUNT</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>TRX-9904</td>
                            <td>10:42:01</td>
                            <td>Shell Corp A</td>
                            <td>$12,500.00</td>
                        </tr>
                        <tr>
                            <td>TRX-9903</td>
                            <td>10:44:15</td>
                            <td>Vendor X</td>
                            <td>$4,200.00</td>
                        </tr>
                        <tr class="row-alert" id="suspicious-row" onmouseenter="revealChaos()" onmouseleave="hideChaos()">
                            <td>TRX-9902</td>
                            <td>10:45:00</td>
                            <td>Unknown_LLC</td>
                            <td>$50,000.00</td>
                        </tr>
                        <tr>
                            <td>TRX-9901</td>
                            <td>10:48:22</td>
                            <td>Payroll</td>
                            <td>$125,000.00</td>
                        </tr>
                        <tr>
                            <td>TRX-9900</td>
                            <td>10:55:01</td>
                            <td>Ops Cost</td>
                            <td>$1,200.00</td>
                        </tr>
                    </tbody>
                </table>
            </section>

            <section class="panel-morph" id="morph-canvas">

                <div class="f-mono" style="position: absolute; top: 2rem; right: 2rem; z-index: 20;">
                    NODE_GRAPH_VISUALIZER
                </div>

                <svg class="connector-layer">
                    <line x1="50%" y1="50%" x2="70%" y2="30%" stroke="rgba(255,255,255,0.1)" />
                    <line x1="50%" y1="50%" x2="30%" y2="60%" stroke="rgba(255,255,255,0.1)" />
                    <line x1="70%" y1="30%" x2="80%" y2="40%" stroke="rgba(255,255,255,0.1)" />

                    <path id="hidden-link" d="M 50% 50% Q 60% 70% 30% 60%" fill="none" stroke="white" stroke-width="1" stroke-dasharray="5,5" style="opacity: 0; transition: opacity 0.5s;" />
                </svg>

                <div class="node main floating" style="top: 45%; left: 45%;">ROOT</div>
                <div class="node floating" style="top: 25%; left: 65%; animation-delay: 1s;">A-01</div>
                <div class="node floating" style="top: 35%; left: 75%; animation-delay: 2s;">A-02</div>

                <div id="target-node" class="node" style="top: 55%; left: 25%; border-style: dashed; animation-delay: 0.5s;">
                    UNK
                </div>

                <div class="insight-card" id="insight-card">
                    <div style="border-bottom: 1px solid #333; padding-bottom: 0.5rem; margin-bottom: 1rem; display: flex; justify-content: space-between;">
                        <span class="f-mono text-red-500">FLAG: ANOMALY</span>
                        <span class="f-mono">LVL. 5</span>
                    </div>
                    <h3 class="f-serif" style="font-size: 1.5rem; margin-bottom: 0.5rem;">The Morphology.</h3>
                    <p style="font-size: 0.9rem; line-height: 1.5; color: #aaa;">
                        Entity "Unknown_LLC" exhibits round-number bias ($50k) and morphs into "Shell Corp A" via secondary accounts.
                    </p>
                    <div style="margin-top: 1rem; padding-top: 1rem; border-top: 1px dashed #333;" class="f-mono">
                        > INVESTIGATE
                    </div>
                </div>

            </section>

            <svg class="magic-thread">
                <path id="connector-line" d="" fill="none" stroke="white" stroke-width="1.5" style="opacity: 0; transition: opacity 0.3s;" />
                <circle id="connector-dot" cx="0" cy="0" r="3" fill="white" style="opacity: 0;" />
            </svg>

        </div>
    </div>

    <script>
        function revealChaos() {
            // 1. Show the Node Graph connection
            document.getElementById('hidden-link').style.opacity = '1';
            document.getElementById('target-node').style.borderColor = '#fff';
            document.getElementById('target-node').style.backgroundColor = '#fff';
            document.getElementById('target-node').style.color = '#000';

            // 2. Show the Insight Card
            document.getElementById('insight-card').classList.add('visible');

            // 3. DRAW THE LINE (The Magic Thread)
            const tableRow = document.getElementById('suspicious-row').getBoundingClientRect();
            const targetNode = document.getElementById('target-node').getBoundingClientRect();

            // Calculate start point (Right side of the table row)
            const startX = tableRow.right;
            const startY = tableRow.top + (tableRow.height / 2);

            // Calculate end point (Center of the target node)
            const endX = targetNode.left + (targetNode.width / 2);
            const endY = targetNode.top + (targetNode.height / 2);

            // Draw a Bezier curve connecting them
            const path = `M ${startX} ${startY} C ${startX + 100} ${startY}, ${endX - 100} ${endY}, ${endX} ${endY}`;

            const connector = document.getElementById('connector-line');
            connector.setAttribute('d', path);
            connector.style.opacity = '1';

            // Show dot at intersection
            const dot = document.getElementById('connector-dot');
            dot.setAttribute('cx', startX);
            dot.setAttribute('cy', startY);
            dot.style.opacity = '1';
        }

        function hideChaos() {
            document.getElementById('hidden-link').style.opacity = '0';
            document.getElementById('insight-card').classList.remove('visible');
            document.getElementById('connector-line').style.opacity = '0';
            document.getElementById('connector-dot').style.opacity = '0';

            // Reset Node
            const node = document.getElementById('target-node');
            node.style.borderColor = 'rgba(255,255,255,0.3)';
            node.style.backgroundColor = 'transparent';
            node.style.color = '#fff';
        }
    </script>

    <div style="position: fixed; inset: 0; pointer-events: none; opacity: 0.05; background-image: url('data:image/svg+xml,%3Csvg viewBox=%220 0 200 200%22 xmlns=%22http://www.w3.org/2000/svg%22%3E%3Cfilter id=%22n%22%3E%3CfeTurbulence type=%22fractalNoise%22 baseFrequency=%220.8%22/%3E%3C/filter%3E%3Crect width=%22100%25%22 height=%22100%25%22 filter=%22url(%23n)%22/%3E%3C/svg%3E');"></div>

</body>
</html>
